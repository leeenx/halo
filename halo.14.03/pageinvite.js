halo.use(function(a){var d=(a.addClass,a.removeClass,a.webkit);halo.add("pageinvite",function(){var b=document.documentElement.clientHeight,c=50,e=function(e,f){var g={};g.need_scale="undefined"==typeof f?!0:f;for(var s,h=e.getElementsByClassName("page"),i=0,j=-1,k=1,l=1,m=!1,n="none",o="none",p=null,q=h[1],r=h[0],u=-1,v=0,w=h.length;w>v;++v)h[v].style.cssText="position:absolute; z-index:0; left:0; top:"+(0==v?"0":"100%")+";";var x=function(a){if(a.preventDefault(),!m){var b=a.changedTouches||a.targetTouches;u=b[0].pageY}};a.on(e,"touchstart",x,!1);var y=function(a){if(!(m||0>u)){var b=a.targetTouches||a.changedTouches,c=b[0].pageY,d=c-u;n=0>d?"up":d>0?"down":"none",B(d)}};a.on(e,"touchmove",y,!1);var z=function(a){if(s||(r.style[d+"transition"]=d+"transform .2s linear",r.style[d+"transform"]="translate3d(0,0,0)",setTimeout(function(){r.style[d+"transition"]="",m=!1},200)),!(!s||m||0>u)){m=!0;var e=a.changedTouches||a.targetTouches,f=e[0].pageY,g=f-u;Math.abs(g)>=c?C():0!=g?(s.style[d+"transition"]=d+"transform .2s linear",s.style[d+"transform"]="translate3d(0,"+("up"==n?b:-1*b)+"px,0)",r.style[d+"transform"]="scale(1,1)",setTimeout(function(){n="none",o="none",m=!1},200)):m=!1,u=-1}};a.on(e,"release",z,!1),a.on(e,"forcerelease",z,!1),a.on(e,"flick",function(){m=!1},!1);var A=function(a){return a>=0?a%w:w+a%w},B=function(){return function(a){o!=n&&("up"==n?(!p||(p.style.top="-100%"),!q||(q.style.cssText=d+"transform:translate3d(0,"+b+"px,0);z-index:1;display:block; position:absolute;"),s=q,l=i):"down"==n?(!q||(q.style.top="100%"),!p||(p.style.cssText=d+"transform:translate3d(0,-"+b+"px,0); z-index:1; display:block; position:absolute;"),s=p,l=j):"up"==o?!q||(q.style.top="100%"):"down"==n&&(!p||(p.style.top="-100%")),o=n);var c="up"==n?b:-b;if(s?s.style[d+"transform"]="translate3d(0,"+(c+a)+"px,0)":r.style[d+"transform"]="translate3d(0,"+a/3+"px,0)",g.need_scale&&s){r.style[d+"transform-origin"]="up"==n?"top":"bottom";var e=1-.2*Math.abs(a)/b;r.style[d+"transform"]="scale("+e+","+e+")"}}}(),C=function(a){s.style[d+"transition"]=d+"transform .3s linear",s.style[d+"transform"]="translate3d(0,0,0)",g.need_scale&&(r.style[d+"transition"]=d+"transform .3s linear",r.style[d+"transform"]="scale(.8,.8)"),setTimeout(function(){r.style.top="up"==n?"100%":"-100%","function"==typeof g.page_change&&("undefined"==typeof a?g.page_change(i,"up"==n?k:j):g.page_change(i,a)),"up"==n?"undefined"==typeof a?++i:i=a:"undefined"==typeof a?--i:i=a,k=i+1,j=i-1,("undefined"==typeof g.infinite||"undefined"!=typeof g.infinite&&g.infinite)&&(i=A(i),k=A(k),j=A(j)),r=h[i],q=h[k],p=h[j],r.style.cssText="z-index:0;position:absolute; left:0; top:0;",s="up"==n?q:p,n="none",o="none",m=!1},300)},D=function(a){m||a>=0&&w>a&&a!=i&&(m=!0,s=h[a],i>a?(n="down",s.style.cssText=d+"transform:translate3d(0,-"+b+"px,0);z-index:1;display:block; position:absolute;"):(n="up",s.style.cssText=d+"transform:translate3d(0,"+b+"px,0);z-index:1;display:block; position:absolute;"),r.style[d+"transform-origin"]="up"==n?"top":"bottom",setTimeout(function(){C(a)},0))},E=function(){a.off(e,"touchstart",x),a.off(e,"touchmove",y),a.off(e,"release",z,!1),a.off(e,"forcerelease",z,!1)};return g.move=D,g.unbind=E,g.setAuthor=function(){var a=document.createElement("div"),b=document.createElement("div");return a.style.cssText="position: absolute; width: 100%; height: 22px; line-height: 22px; color: rgba(255,255,255,.5); font-size: 12px; font-weight: normal; top:45px; left: 0; text-align: center;",b.style.cssText="position: absolute; width: 100%; height: 22px; line-height: 22px; color: rgba(255,255,255,.5); font-size: 12px; font-weight: normal; bottom:45px; left: 0; text-align: center;",e.parentNode.insertBefore(a,e),e.parentNode.insertBefore(b,e),function(c){a.innerHTML=b.innerHTML=c||""}}(),g};return window.addEventListener("resize",function(){b=document.documentElement.clientHeight}),{bind:e}}())});