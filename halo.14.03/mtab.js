halo.use(function(a){halo.add("mtab",function(e){var h={};var d;var g=[];var c=[];var f=[];var l=0;var k=30;var b=function(o,q){var p=q||null;if(p==null){return}p=" "+p;var n=o.getAttribute("class").replace(p,"");return n};var m=function(o,p){var n=b(o,p);o.setAttribute("class",n)};var j=function(o,p){var n=b(o,p)+" "+p;o.setAttribute("class",n)};h.init=function(t){if(t==null){return}d=t.holder;if(typeof(d)!="object"){return}if(d==null){return}var p=t.tab||null;if(p==null){return}g=d.querySelectorAll(p);f=t.body||[];console.log(d,g,f);var o=g.length;var s=this;var r=function(u){a.on(g[u],"flick",function(v){s.switch_tab(u);v.preventDefault();v.stopPropagation();return false})};for(i=0;i<o;++i){r(i)}console.log("mtab : init");var q=t.fixed||false;if(q){s.init_scroll()}var n=t.cb||null;if(n){s.set_action({cb:n})}};h.init_scroll=function(){var o=function(){var q=d.offsetTop;var r=document.body.scrollTop;if(r>q-k){j(d,"fixed")}else{m(d,"fixed")}};var n;var p=function(){if(n){clearTimeout(n)}n=setTimeout(o,100)};window.addEventListener("scroll",function(){p()})};h.switch_tab=function(n){this.switch_tab_item(n);this.switch_body(n)};h.switch_tab_item=function(p){var n=g.length;var o;if(n==0){return}for(i=0;i<n;++i){m(g[i],"cur")}j(g[p],"cur");console.log("mtab :ã€€switch - to "+p+" tab")};h.switch_body=function(q){var o=f.length;var p;if(o==0){return}for(i=0;i<o;++i){j(f[i],"hide")}var n=f[q];if(n){this.switch_data(q);console.log("mtab :  switch - to "+q+" body");m(n,"hide")}};h.switch_data=function(n){var o=c[n]||null;if(o==null){return}var p=o.callback||function(){};p(o);o.is_first=false};h.set_action=function(r){var q=r.index==null?true:false;var p=r.index||0;var o=function(t,u){var v={index:t,flag:u.flag||true,is_first:true,body:u.body||null,callback:u.cb||null};return v};if(q){var n=g.length;for(i=0;i<n;++i){c[i]=o(i,r)}c[0].is_first=false}else{c[p]=o(i,r)}};h.init(e);return h})});