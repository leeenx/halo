halo.use(function(a){var q,r,s,t,u,v,w,x,y,z,A,b="stop",c="",d=0,e=0,f=0,g=0,h=0,i=0,j=10,k=10,l=50,m=500,n=0,o=0,p=500;"ontouchstart"in document?(q="touchstart",r="touchend",s="touchmove"):(q="mousedown",r="mouseup",s="mousemove"),document.body.addEventListener(q,function(a){if(b="start",c="",f=0,g=0,h=0,i=0,n=(new Date).getTime(),"touchstart"==q){var j=a.changedTouches||a.targetTouches,k=j[0];d=k.pageX,e=k.pageY}else d=a.clientX,e=a.clientY},!0),document.body.addEventListener(s,function(a){var l,m,n,p;("start"==b||"move"==b)&&(l=0,m=0,"touchstart"==q?(n=a.changedTouches||a.targetTouches,p=n[0],h=p.pageX-d,i=p.pageY-e,l=Math.abs(h),m=Math.abs(i)):(l=Math.abs(a.clientX-d),m=Math.abs(a.clientY-e)),(l>j||m>k)&&(c=b,b="move"),f=l,g=m,o=(new Date).getTime())},!0),document.body.addEventListener(r,function(){c=b,b="stop"},!0),document.body.addEventListener("touchcancel",function(){c=b,b="stop"},!0),t=function(){switch(a.webkit){case"-webkit-":return"webkitTransitionEnd";case"-ms-":return"MSTransitionEnd";case"-o-":return"oTransitionEnd";default:return"transitionend"}}(),u=function(){switch(a.webkit){case"-webkit-":return"webkitAnimationEnd";case"-ms-":return"MSAnimationEnd";case"-o-":return"oAnimationEnd";default:return"animationend"}}(),v=function(){switch(a.webkit){case"-webkit-":return"webkitAnimationStart";case"-ms-":return"MSAnimationStart";case"-o-":return"oAnimationStart";default:return"animationstart"}}(),w=function(){switch(a.webkit){case"-webkit-":return"webkitAnimationIteration";case"-ms-":return"MSAnimationIteration";case"-o-":return"oAnimationIteration";default:return"animationiteration"}}(),x="",y={fingermove:[function(a,c){a.preventDefault(),("move"==b||"fingermove"==x)&&c.call(this,a)},s],flick:[function(a,b){("start"==c||"flick"==x)&&b.call(this,a)},r],gesture_left:[function(a,b){(f>=g&&-1*l>=h&&m>=o-n||"gesture_left"==x)&&b.call(this,a)},r],gesture_right:[function(a,b){(f>=g&&h>=l&&m>=o-n||"gesture_right"==x)&&b.call(this,a)},r],gesture_up:[function(a,b){(g>=f&&-1*l>=i&&m>=o-n||"gesture_up"==x)&&b.call(this,a)},r],gesture_down:[function(a,b){(g>=f&&i>=l&&m>=o-n||"gesture_down"==x)&&b.call(this,a)},r],release:[function(a,b){("move"==c||"start"==c||"release"==x)&&b.call(this,a)},r],forcerelease:[function(a,b){("move"==c||"start"==c||"forcerelease"==x)&&b.call(this,a)},"touchcancel"],hold:[function(a,c){"hold"==x&&c.call(d,a);var d=this,e=n;setTimeout(function(){e==n&&"stop"!=b&&c.call(d,a)},p)},q],dblclick:[function(a,b){(z()||"dblclick"==x)&&b.call(this,a)},r],transitionend:[function(a,b){b.call(this,a)},t],animationend:[function(a,b){b.call(this,a)},u],animationstart:[function(a,b){b.call(this,a)},v],animationiteration:[function(a,b){b.call(this,a)},w],setFingerMove:function(a,b){a=a||j,b=b||k,j=a,k=b}},z=function(){var a=0;return function(){if("start"==c){var b=(new Date).getTime();return 500>=b-a?(a=0,!0):(a=b,!1)}}}(),halo.add("uievent",y),A=function(a,b){if(a&&b){x=b,"setFingerMove"!=b&&y[b]&&(b=y[b][1]);var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a.dispatchEvent(c),x=""}},halo.add("trigger",A)});