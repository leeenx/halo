(function(b,g){var e,f,h,a,d,c;f=function(i){var j=i.offsetTop;if(i.offsetParent!=null){j+=f(i.offsetParent)}return j};a=function(){if(!c){c=window.screen.height}return c};h=function(k,j){for(var i in j){k[i]=j[i]}return k};d=function(j,i){j=j||null;return function(){i.apply(j,arguments)}};e=(function(){function i(j){j=j||{};this._init(j);return this}i.prototype._onend=function(){};i.prototype._init=function(k){this.opt=h(i._defaults,k);var n=document.querySelectorAll("[data-"+this.opt.data+"]");a();var o=[];for(var m=0,j=n.length,l;m<j;m++){o.push(f(n[m]))}this.tops=o;this.elements=n;this.num=j;setTimeout(d(this,function(){this._lazy()}),25);this._scrollListener()};i.prototype._initEvent=function(j){this._delegate=d(this,this._lazy);window.addEventListener("scroll",this._delegate,false)};i.prototype._scrollListener=function(j){this._interval=setInterval(d(this,this._lazy),this.opt.interval)};i.prototype.changeUrl=function(l,k){var j=l.tagName;if("IMG"==j){l.src=k;if(l.dataset){l.dataset["lazy"]=null}else{l.setAttribute("data-"+this.opt.data,null)}}else{l.style.backgroundImage=k;if(l.dataset){l.dataset["lazy"]=null}else{l.setAttribute("data-"+this.opt.data,null)}}};i.prototype.onend=function(j){if(typeof j=="function"){this._onend=j}return this};i.prototype._lazy=function(){var m=document.documentElement.scrollTop||document.body.scrollTop,o=this.tops,l,n;for(var k=0,j=o.length;k<j;k++){n=this.elements[k];if(n.dataseta){l=n.dataset[this.opt.data]}else{l=n.getAttribute("data-"+this.opt.data)}if(m+a()*2>o[k]&&"null"!=l){this.changeUrl(n,l);this.num--}}if(this.num<=0){if(this._interval){clearInterval(this._interval)}else{window.removeEventListener("scroll",this._delegate,false);this._onend()}}};return i})();e._defaults={data:"lazy",interval:200};if(typeof g=="undefined"){throw ("缺少依赖库 halo.js");b.Lazyloader=e;return}g.add("lazyloader",e)})(window,halo);