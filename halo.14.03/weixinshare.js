halo.use(function(){function d(){"object"==typeof WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke?f():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",f,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",f),document.attachEvent("onWeixinJSBridgeReady",f))}function f(){WeixinJSBridge.on("menu:share:appmessage",g),WeixinJSBridge.on("menu:share:timeline",h)}function g(){var d,a={};for(d in c)a[d]=b[d]||c[d];a.appid||delete a.appid,WeixinJSBridge.invoke("sendAppMessage",a,function(a){i(a.err_msg)})}function h(){var d,a={};for(d in c)a[d]=b[d]||c[d];a.appid||delete a.appid,b.useTitle||(a.title=b.desc),b.friendsDesc&&(a.title=b.friendsDesc),WeixinJSBridge.invoke("shareTimeline",a,function(a){i(a.err_msg)})}function i(a){var c=a.indexOf("ok")>=0||a.indexOf("confirm")>=0?"ok":a.indexOf("cancel")>=0?"cancel":"fail";"function"==typeof b.cb&&b.cb(c)}var e,b={},c={link:"",img_url:"",desc:"",title:"",img_width:80,img_height:80,appid:""};"complete"!=document.readyState?"uninitialized"==document.readyState||"loading"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState||"complete"==document.readyState?(e=function(){if("complete"!=document.readyState){var a=arguments;return setTimeout(function(){a.callee()},300),void 0}d()},"interactive"==document.readyState&&e(),document.addEventListener("DOMContentLoaded",function(){e()})):!function(){setTimeout(function(){d()},1e3);var a=setInterval(function(){--b?f():clearInterval(a)},5e3),b=10}():d(),halo.add("weixinshare",function(a,c,d,e,f,g,h){if("object"==typeof a)b=a,b.img&&(b.img_url=b.img,delete b.img),b.url&&(b.link=b.url,delete b.url);else{if("string"!=typeof a)throw b=void 0,"url expect string type";b={link:a,img_url:c||"",desc:e||"",title:d||"",img_width:f||80,img_height:g||80},h&&(b.appid=h)}return b})});